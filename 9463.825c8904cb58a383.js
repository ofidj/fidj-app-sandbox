"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9463],{9463:(Z,a,s)=>{s.r(a),s.d(a,{GdprPageModule:()=>b});var o=s(4556),l=s(1407),p=s(6895),h=s(433),f=s(7582),u=s(5860),e=s(8256),m=s(9251);function v(t,d){if(1&t){const i=e.EpF();e.TgZ(0,"ion-item-sliding")(1,"ion-item")(2,"ion-label"),e._uU(3),e.qZA(),e.TgZ(4,"a",9),e._UZ(5,"img",10),e.qZA()(),e.TgZ(6,"ion-item-options",11)(7,"ion-item-option",12),e.NdJ("click",function(){const r=e.CHM(i).$implicit,T=e.oxw(2);return e.KtG(T.remove(r))}),e._uU(8,"Remove all my data"),e.qZA()()()}if(2&t){const i=d.$implicit;e.xp6(3),e.AsE("",i.title," - ",i.description,""),e.xp6(1),e.s9C("href",i.pub,e.LSH),e.xp6(1),e.s9C("src",i.badge,e.LSH)}}function G(t,d){if(1&t&&(e.TgZ(0,"ion-list"),e.YNc(1,v,9,4,"ion-item-sliding",8),e.qZA()),2&t){const i=e.oxw();e.xp6(1),e.Q6J("ngForOf",i.profileAppsSubscribed)}}let g=(()=>{class t{constructor(i,c,n){this.router=i,this.fidjService=c,this.fidjConnectionService=n,this.refresh(null)}refresh(i){return(0,f.mG)(this,void 0,void 0,function*(){let c={iss:""};try{const r=(yield this.fidjService.getIdToken()).split(".")[1];c=JSON.parse(u.DS.decode(r)),this.fidjConnectionService.setUrl(c.iss)}catch(n){return i&&i.target.complete(),yield this.fidjConnectionService.checkError(n)}this.profileAppsSubscribed=[];try{this.me=yield this.fidjService.sendOnEndpoint({verb:"GET",key:"me",relativePath:"details"});for(let n=0;n<this.me.user.appsSubscribed.length;n++){const r=(yield this.fidjService.sendOnEndpoint({verb:"GET",key:"apps",relativePath:this.me.user.appsSubscribed[n]})).app;console.log("app:",r),r.badge=this.fidjConnectionService.getUrl()+`/apps/${r.id}/badge`,r.pub=`#/pub/${r.id}`,this.profileAppsSubscribed.push(r)}}catch(n){yield this.fidjConnectionService.checkError(n)}i&&i.target.complete()})}remove(i){return(0,f.mG)(this,void 0,void 0,function*(){try{yield this.fidjService.sendOnEndpoint({verb:"DELETE",key:"apps",relativePath:i.id+"/contracts"})}catch(c){yield this.fidjConnectionService.checkError(c)}})}}return t.\u0275fac=function(i){return new(i||t)(e.Y36(l.F0),e.Y36(u.DR),e.Y36(m.G))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-gdpr"]],decls:16,vars:3,consts:[[3,"translucent"],["src","assets/fidj-logo.png","height","15em"],[3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["collapse","condense"],["size","large"],["size-md","8","offset-md","2","size-sm","12"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"href"],[3,"src"],["side","end"],["color","danger",3,"click"]],template:function(i,c){1&i&&(e.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e._UZ(3,"img",1),e._uU(4," GDPR "),e.qZA()()(),e.TgZ(5,"ion-content",2)(6,"ion-refresher",3),e.NdJ("ionRefresh",function(r){return c.refresh(r)}),e._UZ(7,"ion-refresher-content"),e.qZA(),e.TgZ(8,"ion-header",4)(9,"ion-toolbar")(10,"ion-title",5),e._uU(11,"GDPR"),e.qZA()()(),e.TgZ(12,"ion-grid")(13,"ion-row")(14,"ion-col",6),e.YNc(15,G,2,1,"ion-list",7),e.qZA()()()()),2&i&&(e.Q6J("translucent",!0),e.xp6(5),e.Q6J("fullscreen",!0),e.xp6(10),e.Q6J("ngIf",c.profileAppsSubscribed))},dependencies:[o.wI,o.W2,o.jY,o.Gu,o.Ie,o.u8,o.IK,o.td,o.Q$,o.q_,o.nJ,o.Wo,o.Nd,o.wd,o.sr,p.sg,p.O5]}),t})();var S=s(581);const y=[{path:"",component:g}];let P=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(y),l.Bz]}),t})(),b=(()=>{class t{}return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[o.Pc,p.ez,h.u5,S.e,l.Bz.forChild([{path:"",component:g}]),P]}),t})()}}]);